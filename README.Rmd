---
output: github_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/",
  out.width = "100%"
)
```


# handcodeR

R-Package to fascilitate the classification of textdata by hand in R.


The goal of the handcodeR package is to provide an easy to use app to annotate text data by hand. Oftentimes when we work with textdata, we rely on handcoded annotations of texts either as unit of analysis in itself, or as training and text samples for supervised machine learning tools to classify text data. handcodeR offers a shiny app that can be run within R to annotate individual texts one by one in up to three different variables. To do so, the package uses the function:

- `handcode` opens a shiny app which allows for handcoding strings of text into pre-defined categories. You can code between one and three variables at a time. It returns a data.frame with your handcoded annotations.


I present a short step-by-step guide as well as the functions in more detail below.

## Installation

The `handcodeR` Package can be installed directly from [GitHub](https://github.com/liserman/handcodeR)

```{R, message=FALSE, warning=FALSE, results = "hide", eval=FALSE}
library(devtools) # Tools to Make Developing R Packages Easier
devtools::install_github("liserman/handcodeR")
```

## How to use this package

First, load the package

```{R, message=FALSE, warning=FALSE}
library(handcodeR) # classify texts by hand in R
```

In the following, we are going to exemplify the workflow of the package using a minimal working example.

The workflow of the package follows a simple rule:

1. If you start the coding process, initialize the coding with `handcode()` by providing a text vector of texts you whish to annotate as *data* input, and up to three named character vectors of categories you want to code. Handcode as much data as you would like and return the output data.frame via the "save and exit"-button.

2. If you want to resume coding that you have already been working on, continue the coding with `handcode()` by providing the data.frame you received as output from your last call of `handcode()` as *data* input.


### handcode

The main function of the handcodeR package is `handcode()`. `handcode()` takes either a vector of texts and up to 3 named character vectors with classification categories, or a data.frame already initialized by `handcode()` as input. The function allows users to annotate texts using the pre-defined categories in an interactive ShinyApp and returns a data.frame of the texts with their annotations.



**Ab hier fertig Ã¼berarbeiten!!!**


```{R, eval = FALSE}
data_new <- handcode(data)
```

![](man/figures/shinyApp.PNG)

After finishing the classification process you can click on 'Save and exit' to returns a dataframe with your classifications.

```{R, echo = FALSE}
data[,2] <- factor(c("cat 1", "cat 1", "cat 2", "Not applicable"), levels = c("", "Not applicable", "cat 1", "cat 2"))

data
```


#### Classifying more than one variable

Dependent on the number of variables you gave in the initialization of the input data via `init_data`, you can classify up to three variables with handcode.

```{r, eval = FALSE}
data_3cat_new <- handcode(data_3cat)
```

![](man/figures/shinyApp3.PNG)

```{R, echo = FALSE}
data_3cat[,2] <- factor(c("cat 1", "cat 1", "cat 2", "Not applicable"), levels = c("", "Not applicable", "cat 1", "cat 2"))
data_3cat[,3] <- factor(c("cat b", "cat c", "cat b", "cat a"), levels = c("", "Not applicable", "cat a", "cat b", "cat c"))
data_3cat[,4] <- factor(c("cat II", "Not applicable", "cat II", "cat I"), levels = c("", "Not applicable", "cat I", "cat II"))

data_3cat
```


#### Beyond the basics

By default, `handcode` uses the first uncoded line in the input data as start value. However, the option `start` allows users to specify with which observation they want to start their coding process. To fascilitate the classification process, `handcode` takes the keyboard shortcuts `space` for 'previous' and `enter` for 'next'. If you go back to already coded lines of your data, the app automatically displays your previous coding, if you go to new lines of your data, the default values for your variables always are "". If the last row of your data is reached, 'next' automatically leads to the saving of the data and exit from the shiny app.  


